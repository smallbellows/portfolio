---
import { getCollection } from 'astro:content';

// Layout import â€” provides basic page elements: <head>, <nav>, <footer> etc.
import BaseLayout from '../layouts/BaseLayout.astro';

// Component Imports
import CallToAction from '../components/CallToAction.astro';
import Grid from '../components/Grid.astro';
import Hero from '../components/Hero.astro';
import Icon from '../components/Icon.astro';
import Pill from '../components/Pill.astro';
import PortfolioPreview from '../components/PortfolioPreview.astro';

// Page section components
import ContactCTA from '../components/ContactCTA.astro';
import Skills from '../components/Skills.astro';

// Content Fetching: List four most recent work projects
const projects = (await getCollection('work'))
    .sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf())
    .slice(0, 4);
---

<BaseLayout>
    <div>
        <div>
            <header class="pb-2">
                <div class="hero is-light">
                    <div class="hero-body is-vcentered centered">
                        <h3 class="title">Hi, I'm Sara</h3>
                        <p class="subtitle">
                            Full-stack software developer and team manager based
                            in Vancouver, BC
                        </p>
                    </div>
                </div>
            </header>

            <Skills />
        </div>

        <main>
            <section>
                <header>
                    <h3>Selected Work</h3>
                </header>

                <div>
                    <Grid variant="offset">
                        {
                            projects.map((project) => (
                                <li>
                                    <PortfolioPreview project={project} />
                                </li>
                            ))
                        }
                    </Grid>
                </div>

                <div>
                    <CallToAction href="/work/">
                        View All
                        <Icon icon="arrow-right" size="1.2em" />
                    </CallToAction>
                </div>
            </section>
        </main>

        <ContactCTA />
    </div>
</BaseLayout>

<style>
    .is-vcentered.centered {
        text-align: center;
    }
</style>
